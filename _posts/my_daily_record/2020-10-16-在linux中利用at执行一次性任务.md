---
layout: post
title: 在linux中设定一次性的执行任务
category: tech
tags: [linux]
description: 像我一样经常工作于Windows和Linux，那么这篇文章值得一看
---

# 背景

有部门联系人说当前的虚拟机的资源不够，要求在晚上十点以后对虚拟机的资源进行扩容。
增加CPU和内存。

# 过程
检查了下该虚拟机，没有开通CPU和内存的热添加功能。

先在控制台搞一个计划任务，在晚上10点对该机器做一个快照。

开始写一个执行脚本。

开启该虚拟机的CPU和内存的热添加功能，这里又牵出以前的案例，测试了下发现旧的扩展配置属性的方法不能用了。在网上找到个新的，测试通过。

脚本写好了，要安排个时间执行。
因为是一次性的任务，所以就使用at命令。
我使用的是pwsh，就是linux下的vmware powershell。

>  pwsh -f ext1.ps1 |at 10:05pm

系统会产生一个job。

可以用atq命令查看。

对于要取消的任务，可以用atrm 任务号 进行删除。



