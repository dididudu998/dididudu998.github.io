---
layout: post
title: 在安卓手机上彻底删除SD卡的数据
category: tech
tags: [Linux, Android]
description: 如果你也像我一样经常工作于Windows和Linux，那么这篇文章值得一
---

## 起因

莫名的红米Note7的手机在天快亮的时候不断的充电断开，再充电断开，这声音把我给吵醒了。。。。

旁边有两个充电器，以为是充电器坏了，就换了一个，发现故障依旧啊，但是另外一个手机就没有问题。所以是note7的问题。

尝试关机充电看看，关机的时候，充电是正常的。

再启动下，发现充电也没有问题。但是启动后，手机提示SD卡无法加载，请格式化SD卡的提示。我x，要是这样里面下载的歌和图片都没有了。

死马当活马医，把这个sd卡关机拿下来，放到另外的手机上，看看是否能够正常加载。失败，依旧是提示数据无法加载，请格式化。

什么都没干，这卡怎么就废了。。。。

联系京东售后，说这个卡在保修期内，可以换，那就换吧。

我手头没有sd卡的卡套，没法在电脑上进行尝试修复的操作。如果卡被京东回收后，数据可以修复，我的个人信息不就全expose了。

咱做技术的，不能就这么的简单。

## 处理

- 格式化SD卡，按照手机提示，只好先格式化，可是格式化也出问题，格式化了15分钟，卡死在格式化界面了，我x，这卡看来是真彻底废了
- 不死心，把卡拿下来换到另外一个手机上，按照提示格式化的再来一下，这次还不错，不到1分钟就格式化完成了。
- 数据被清理了，等京东来回收。
- 手机里面装个termux，开始做深度wipe的操作
  - <font color=green>pkg install tsu</font> （这个是安装termux的root的，开启tsu就直接进root模式）
  - mount一下，看看sd卡的路径，发现是那种文件挂载的路径，这是不行的，需要找到/dev/路径的那种对象才可以
  - 然后找到sd的设备路径为：
  <font color=red><b>/dev/block/vold/179,65</b></font>

  - 开始用dd来复写sd卡

    ```shell
    dd if=/dev/urandom of=/dev/block/vold/179,65
    ```

> 做了个测试，如果是使用0来复写的话，速度大概是每秒50MB，使用随机的话，每秒只有11MB的速度。

```shell
dd if=/dev/zero of=/dev/block/vold/179,65 bs=2G count=1 oflag=direct

dd if=/dev/uraom of=/dev/block/vold/179,65 bs=2G count=1 oflag=direct
```

## 结果

就是SD卡128GB,用urandom的方式,花了有三个多小时，以每秒11.8MB的速度，复写了一遍。

以后买手机就直接买存储空间大的，最少256GB起，不要再幻想用SD卡来存一些数据，这个数据的存储风险太大了。

还是苹果做的彻底，根本就不会有SD卡扩展的可能。


